{% extends 'blog/base.html' %}
{% load markdownify %} 


{% block title %}
    Blog Detail 
{% endblock %}

{% block content %}
    {% if user.is_authenticated %}
        <a href="{% url 'post_edit' pk=post.pk %}" class="icone3"><i class="fas fa-edit" style="color: white;" ></i></a>
    {% endif %}
    <div class="on-content">
        <h1>{{ post.title }}</h1>
        <p>{{ post.text|linebreaksbr }}</p>
        <h5 class="content-published-date">{{ post.published_date }}</h5>
    </div>
    
    <hr>
    <a href="{% url 'comment' pk=post.pk %}" class="btn btn-primary"> Add comment</a>
    <hr>
    <br>
    <br>
    {% for commentes in post.comments.all %}
        {% if user.is_authenticated or commentes.approved %}
            <strong>{{ commentes.author }}</strong>
            <br>
            <p>{{ commentes.text }}</p> 
            {{ commentes.created_date }}
            {% if user.is_superuser and not commentes.approved %}
            <p><a href="{% url 'delete' pk=commentes.pk %}" class="btn btn-danger"><i class="fas fa-trash-alt"></i></a>
                    <a href="{% url 'approve_comment' pk=commentes.pk %}" class="btn btn-success"><i class="fas fa-thumbs-up"></i></a>
                </p>
            {% endif %}
            <h1>-----</h1>
        {% endif %}
    {% empty %}
        <p>No comments yet...</p>            
    {% endfor %}
{% endblock %}